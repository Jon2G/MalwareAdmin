@using MalwareAdmin.Web.Models
@implements MalwareAdmin.Web.Interfaces.IPopover

@if (Settings is not null)
{
    <div style="display: inline-flex">
        <MudIcon Icon="@Icons.Filled.Vaccines" Size="Size.Large"/>
        <h6 style="margin: auto"> Ingrese su APIKey de virus total:</h6>
    </div>
    <MudTextField Placeholder="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" T="string" @bind-Text="@Settings.ApiKey"/>
    <MudToolBar>
        <MudButton StartIcon="@Icons.Filled.Api" OnClick="@Close">Continuar</MudButton>
        <MudSpacer/>
        <MudButton StartIcon="@Icons.Filled.Cancel" OnClick="@Cancel" IconColor="Color.Error">Cancelar</MudButton>
    </MudToolBar>
}

@code {
    [Parameter]
    public VirusTotalSettings Settings { get; set; }
    [Inject]
    public Radzen.DialogService DialogService { get; set; }

    public void Refresh()
    {
        InvokeAsync(StateHasChanged).SafeFireAndForget();
    }

    public Task Cancel()
    {
        Settings = null;
        return Close();
    }
    public Task Close()
    {
        return Task.Run(() => DialogService.Close(this));
    }

}
