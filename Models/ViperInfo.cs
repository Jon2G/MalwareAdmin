using Kit;
using LiteDB;

namespace MalwareAdmin.Models
{
    public class ViperInfo
    {
        [BsonId(true)]
        public LiteDB.ObjectId Id { get; set; }
        public string Path { get; set; }
        public ViperInfo()
        {

        }
        private static ILiteCollection<ViperInfo> Collection => Tools.Container.Get<LiteDatabase>().GetCollection<ViperInfo>();
        public static ViperInfo Get()
        {
            ViperInfo? viper = Collection.FindAll().FirstOrDefault();
            if (viper is null)
            {
                return new ViperInfo().Save();
            }
            return viper;
        }

        public ViperInfo Save()
        {
            Collection.Upsert(this);
            return this;
        }
    }
}
