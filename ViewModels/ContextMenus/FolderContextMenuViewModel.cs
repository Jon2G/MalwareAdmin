using Kit.Extensions;
using Kit.Model;
using MalwareAdmin.Models.Files;

namespace MalwareAdmin.ViewModels
{
    public class FolderContextMenuViewModel : ModelBase
    {
        public Command<FolderObject> DeleteCommand { get; set; }
        public Command<FolderObject> ShowInExplorerCommand { get; set; }
        public Command<FolderObject> NewFolderCommand { get; set; }

        private FolderObject _Foder;
        public FolderObject Folder
        {
            get => _Foder;
            set => RaiseIfChanged(ref _Foder, value);
        }

        public FolderContextMenuViewModel(FolderObject folder = null)
        {
            Folder = folder;
            DeleteCommand = new Command<FolderObject>(Delete);
            ShowInExplorerCommand = new Command<FolderObject>(ShowInExplorer);
            NewFolderCommand = new Command<FolderObject>(NewFolder);
        }

        private void NewFolder(FolderObject folder)
        {
            //TODO: ask for name
            string name = "dummy";

            folder.CreateSubDirectory(name);


        }
        private void ShowInExplorer(FolderObject folder)
        {
            folder.ShowInExplorer();
        }

        private void Delete(FolderObject file)
        {
            file?.Delete();
        }

    }
}
